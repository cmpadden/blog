<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="Personal technical diary">
<title>
Upgrading the Firmware on the PCEngines APU2 - Technical Log
</title>




<link rel="shortcut icon" href="/blog/favicon.ico">








<link rel="stylesheet" href="/blog/css/main.min.81bbafc4df93b11c1c3e2449464373c384aa4903731b4fc7a77dfcdd979e184f.css" integrity="sha256-gbuvxN&#43;TsRwcPiRJRkNzw4SqSQNzG0/Hp3383ZeeGE8=" crossorigin="anonymous" media="screen">



 

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://cmpadden.github.io/blog/tn.png"/>

<meta name="twitter:title" content="Upgrading the Firmware on the PCEngines APU2"/>
<meta name="twitter:description" content="I&rsquo;ve had a PCEngines APU2 gathering dust for a few years, and have recently decided to dust it off.
Since the last time the device has been powered on, there have been many great improvements to the firmware, and it was very-much due for an upgrade. The following steps outline how the the firmware was upgrade on the APU directly from the already-installed operating system &ndash; CentOS.
First, we will connect to the device over the serial port"/>

<meta property="og:title" content="Upgrading the Firmware on the PCEngines APU2" />
<meta property="og:description" content="I&rsquo;ve had a PCEngines APU2 gathering dust for a few years, and have recently decided to dust it off.
Since the last time the device has been powered on, there have been many great improvements to the firmware, and it was very-much due for an upgrade. The following steps outline how the the firmware was upgrade on the APU directly from the already-installed operating system &ndash; CentOS.
First, we will connect to the device over the serial port" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cmpadden.github.io/blog/posts/apu2-firmware-upgrade/" />

<meta property="og:image" content="https://cmpadden.github.io/blog/tn.png" />
<meta property="article:published_time" content="2019-12-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-12-21T00:00:00+00:00" /><meta property="og:site_name" content="Technical Diary" />


    

    
    
    
    <title>
        
        Upgrading the Firmware on the PCEngines APU2
        
    </title>
</head>

<body>
    <div class="wrap">
        <div class="section" id="title">Upgrading the Firmware on the PCEngines APU2</div>

        
<div class="section" id="content">
    Sat Dec 21, 2019 &#183; 175 words
    
    <div class="tag-container">
        
        <span class="tag">
            <a href="https://cmpadden.github.io/blog/tags/pcengine">
                pcengine
            </a>
        </span>
        
        <span class="tag">
            <a href="https://cmpadden.github.io/blog/tags/apu">
                apu
            </a>
        </span>
        
    </div>
    
    <hr/>
    <p>I&rsquo;ve had a <a href="https://pcengines.ch/apu2.htm">PCEngines APU2</a> gathering dust for a
few years, and have recently decided to dust it off.</p>

<p>Since the last time the device has been powered on, there have been many great
improvements to the firmware, and it was very-much due for an upgrade. The
following steps outline how the the firmware was upgrade on the APU directly
from the already-installed operating system &ndash; CentOS.</p>

<p>First, we will connect to the device over the serial port</p>

<pre><code>screen /dev/tty.usbserial 115200
</code></pre>

<p>Then, we will install the <code>flashrom</code> utility that is needed to update the
firmware, but because it is not available in the default CentOS package
repositories, we will enable the <em>Extra Packages for Enterprise Linux</em> (EPEL)
repository first.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo yum install epel-release
sudo yum install flashrom</code></pre></div>
<p>Next, we will download the latest version of the firmware binary that is
compatible with the APU2 device from the PC Engines release notes website:
<a href="https://pcengines.github.io/">https://pcengines.github.io/</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -O https://3mdeb.com/open-source-firmware/pcengines/apu2/apu2_v4.11.0.1.rom</code></pre></div>
<p>And finally, we will flash the firmware&hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo flashrom -w apu2_v4.11.0.1.rom -p internal:boardmismatch<span style="color:#f92672">=</span>force</code></pre></div>
<p><strong>References:</strong></p>

<ul>
<li><a href="https://pcengines.ch/apu2.htm">https://pcengines.ch/apu2.htm</a></li>
<li><a href="https://pcengines.github.io/">https://pcengines.github.io/</a></li>
<li><a href="https://github.com/pcengines/apu2-documentation/blob/master/docs/firmware_flashing.md">https://github.com/pcengines/apu2-documentation/blob/master/docs/firmware_flashing.md</a></li>
<li><a href="https://github.com/pcengines/apu2-documentation/blob/master/docs/cold_reset.md">https://github.com/pcengines/apu2-documentation/blob/master/docs/cold_reset.md</a></li>
<li><a href="https://github.com/elad/openbsd-apu2">https://github.com/elad/openbsd-apu2</a></li>
</ul>

</div>


        
<div class="section bottom-menu">
    
<hr />
<p>


    
        <a href="/blog/posts">back</a>
        
            &#183;
        
    

    
        
            <a href="/blog/posts">Posts</a>
        
    
    
    &#183; 
    <a href="https://cmpadden.github.io/blog/">
        main
    </a>

</p>
</div>


        <div class="section footer">The troubleshooting log</div>
    </div>
</body>

</html>